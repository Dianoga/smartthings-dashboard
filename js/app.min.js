angular.module("Dashboard",["goangular"]).config(function(e){e.$set("https://goinstant.net/Dianoga/smartthings-dashboard")}).controller("DashCtrl",function(e,t){e.devices=t("devices","Test").$sync(),e.devices.$on("ready",function(){angular.forEach(e.devices,function(e,t){void 0!=e&&(void 0!=e.temperature&&i(t,e.temperature),void 0!=e.battery&&a(t,e.battery),n(t,"Battery"),n(t,"Indicator"),n(t,"Polling"),n(t,"Sensor"),n(t,"Actuator"),n(t,"Refresh"),n(t,"Signal Strength"))})}),e.devices.$on("set",{bubble:!0},function(e,t){var n=t.key.split("/")[2];-1!=t.key.indexOf("temperature")?i(n,e):-1!=t.key.indexOf("battery")&&a(n,e)}),e.devices.$on("error",{bubble:!0},function(e){console.log(e)});var i=function(t,i){var a=chroma.scale(["#08519c","#c6dbef","#ffffb2","#bd0026"]).mode("hsv").domain([0,100]).out("hex"),n=a(i),r=chroma(n).luminance()>.5?chroma(n).darken(50).hex():chroma(n).brighten(50).hex();e.devices[t].temperatureTextColor=r,e.devices[t].temperatureBgColor=n},a=function(t,i){var a="icon-battery-full";25>=i?a="icon-battery-25":50>=i?a="icon-battery-50":75>=i&&(a="icon-battery-75"),e.devices[t].batteryIcon=a},n=function(t,i){if(void 0!=e.devices[t].capabilities){var a=e.devices[t].capabilities.indexOf(i);-1!=a&&e.devices[t].capabilities.splice(a,1)}}});