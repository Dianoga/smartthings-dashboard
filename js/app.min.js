angular.module("Dashboard",["goangular"]).config(function(e){e.$set("https://goinstant.net/Dianoga/smartthings-dashboard")}).controller("DashCtrl",function(e,t){e.devices=t("devices","Test").$sync(),e.devices.$on("ready",function(){angular.forEach(e.devices,function(e,t){void 0!=e&&(void 0!=e.temperature&&r(t,e.temperature),void 0!=e.battery&&a(t,e.battery),i(t,"Battery"),i(t,"Indicator"),i(t,"Polling"),i(t,"Sensor"),i(t,"Actuator"),i(t,"Refresh"),i(t,"Signal Strength"))})}),e.devices.$on("set",{bubble:!0},function(e,t){var i=t.key.split("/")[2];-1!=t.key.indexOf("temperature")?r(i,e):-1!=t.key.indexOf("battery")&&a(i,e)}),e.devices.$on("error",{bubble:!0},function(e){console.log(e)});var r=function(t,r){var a=chroma.scale(["navy","royalblue","skyblue","springgreen","gold","orange","orangered","firebrick"]).mode("hsv").domain([0,100]).out("hex"),i=a(r),n=chroma(i).luminance()>.5?chroma(i).darken(50).hex():chroma(i).brighten(50).hex();e.devices[t].temperatureTextColor=n,e.devices[t].temperatureBgColor=i},a=function(t,r){var a="icon-battery-full";25>=r?a="icon-battery-25":50>=r?a="icon-battery-50":75>=r&&(a="icon-battery-75"),e.devices[t].batteryIcon=a},i=function(t,r){if(void 0!=e.devices[t].capabilities){var a=e.devices[t].capabilities.indexOf(r);-1!=a&&e.devices[t].capabilities.splice(a,1)}}});